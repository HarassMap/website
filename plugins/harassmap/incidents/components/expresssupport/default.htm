<div class="container">
    <div class="row">
        <div class="col-12">
            <h3 class="hr">
                <span class="hr__line"></span>
                <span class="hr__text">{{ 'Express Support' | _ }}</span>
            </h3>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-6">
            <p class="inset">
                <span class="icon"></span>
                {{ 'Thank you! Your support has been added and the reporter has been notified of your support.' | _ }}
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-6">
            <p class="pt-4">
                <strong>
                    {% if report.support == 1 %}
                        {{ 'This incident has :support expression of support.' | _({support: report.support}) }}
                    {% elseif report.support > 1 %}
                        {{ 'This incident has :support expressions of support.' | _({support: report.support}) }}
                    {% else %}
                        {{ 'This incident has no expressions of support.' | _ }}
                    {% endif %}
                </strong>
            </p>
        </div>
    </div>
    <div class="row mt-2 mb-4">
        <div class="col-12">
            <a href="{{ 'reports/view' | page }}" class="btn">
                {{ 'return to report' | _ }}
            </a>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-6">
            <p class="pt-1">
                {{ 'You can share a message of support on social media:' }}
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-12 col-md-6">
            <textarea rows="3" id="share-message"
                      class="form-control social-message">{{ 'I support an end to sexual harassment' | _ }}</textarea>
        </div>
    </div>
    <div class="row mt-2 mb-2">
        <div class="col-12 col-md-6">
            <div class="row">
                <div class="col-6">
                    <a class="btn btn-block share share--facebook" id="facebook-share" href="#">
                        {{ 'Facebook' | _ }}
                    </a>
                </div>
                <div class="col-6">
                    <a class="btn btn-block share share--twitter" id="twitter-share"
                       href="https://twitter.com/home?status=:message">
                        {{ 'Twitter' | _ }}
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

{% put scripts %}
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '{{ domain.facebook_app_id }}',
            autoLogAppEvents: true,
            xfbml: true,
            version: 'v2.9'
        });
        FB.AppEvents.logPageView();
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) {
            return;
        }
        js = d.createElement(s);
        js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>
<script>
    var shareUrl = '{{ 'reports/view' | page }}';

    $('#twitter-share').on('click', function (event) {
        event.preventDefault();

        var message = $('#share-message').val(),
            href = this.href;

        href = href.replace(':message', message + ' ' + shareUrl);

        window.open(href, 'popup', 'width=600,height=255');
    });

    $('#facebook-share').on('click', function (event) {
        event.preventDefault();

        var message = $('#share-message').val();

        // make sure we have the global FB variable
        if (window.FB) {
            FB.ui({
                method: 'share',
                href: shareUrl,
                quote: message
            }, function (response) {

            });
        }
    });
</script>
{% endput %}